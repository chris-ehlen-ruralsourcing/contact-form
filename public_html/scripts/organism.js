var organismJS=function(){"use strict";const e="_initialize",t="_postInitialize",n="_resize",r="data-organism-filter",o="data-organism-state",i="data-organism-link",a="Network resource not loaded: ",l="Undeclared event type: ";let s={maxWebWorkerSize:25,maxDetachedOrganisms:25,sanitize:!0,syncAttributes:!1,detachedOrganismMonitorInterval:6e4,env:new Map,adapters:new Map},u={initializeing:0,postInitializeQueue:[],organismIdMap:new Map,organismTypeMap:new Map,organismGroupMap:new Map,webWorkerMap:new Map,eventListenersMap:new Map,detachedOrganismIds:[]};function c(e){try{return JSON.parse(e)}catch(e){return null}}function f(e,t){if(t){let n=t.setAttributes;n&&n.forEach((function(t){let n=t.name,r=t.value;n&&r&&e.setAttribute(n,r)}));let r=t.removeAttributes;r&&r.forEach((function(t){e.removeAttribute(t)}));let o=e.classList,i=t.addClasses;i&&i.forEach((function(e){o.add(e)}));let a=t.removeClasses;a&&a.forEach((function(e){o.remove(e)}));let l=e.style,s=t.setStyleProperties;s&&s.forEach((function(e){l.setProperty(e.name,e.value)}));let u=t.removeStyleProperties;u&&u.forEach((function(e){l.removeProperty(e)}))}}var p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},d={exports:{}};d.exports=function(){Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var e={},t={"==":function(e,t){return e==t},"===":function(e,t){return e===t},"!=":function(e,t){return e!=t},"!==":function(e,t){return e!==t},">":function(e,t){return e>t},">=":function(e,t){return e>=t},"<":function(e,t,n){return void 0===n?e<t:e<t&&t<n},"<=":function(e,t,n){return void 0===n?e<=t:e<=t&&t<=n},"!!":function(t){return e.truthy(t)},"!":function(t){return!e.truthy(t)},"%":function(e,t){return e%t},log:function(e){return console.log(e),e},in:function(e,t){return!(!t||void 0===t.indexOf)&&-1!==t.indexOf(e)},cat:function(){return Array.prototype.join.call(arguments,"")},substr:function(e,t,n){if(n<0){var r=String(e).substr(t);return r.substr(0,r.length+n)}return String(e).substr(t,n)},"+":function(){return Array.prototype.reduce.call(arguments,(function(e,t){return parseFloat(e,10)+parseFloat(t,10)}),0)},"*":function(){return Array.prototype.reduce.call(arguments,(function(e,t){return parseFloat(e,10)*parseFloat(t,10)}))},"-":function(e,t){return void 0===t?-e:e-t},"/":function(e,t){return e/t},min:function(){return Math.min.apply(this,arguments)},max:function(){return Math.max.apply(this,arguments)},merge:function(){return Array.prototype.reduce.call(arguments,(function(e,t){return e.concat(t)}),[])},var:function(e,t){var n=void 0===t?null:t,r=this;if(void 0===e||""===e||null===e)return r;for(var o=String(e).split("."),i=0;i<o.length;i++){if(null==r)return n;if(void 0===(r=r[o[i]]))return n}return r},missing:function(){for(var t=[],n=Array.isArray(arguments[0])?arguments[0]:arguments,r=0;r<n.length;r++){var o=n[r],i=e.apply({var:o},this);null!==i&&""!==i||t.push(o)}return t},missing_some:function(t,n){var r=e.apply({missing:n},this);return n.length-r.length>=t?[]:r}};return e.is_logic=function(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&1===Object.keys(e).length},e.truthy=function(e){return!(Array.isArray(e)&&0===e.length||!e)},e.get_operator=function(e){return Object.keys(e)[0]},e.get_values=function(t){return t[e.get_operator(t)]},e.apply=function(n,r){if(Array.isArray(n))return n.map((function(t){return e.apply(t,r)}));if(!e.is_logic(n))return n;var o,i,a,l,s,u=e.get_operator(n),c=n[u];if(Array.isArray(c)||(c=[c]),"if"===u||"?:"==u){for(o=0;o<c.length-1;o+=2)if(e.truthy(e.apply(c[o],r)))return e.apply(c[o+1],r);return c.length===o+1?e.apply(c[o],r):null}if("and"===u){for(o=0;o<c.length;o+=1)if(i=e.apply(c[o],r),!e.truthy(i))return i;return i}if("or"===u){for(o=0;o<c.length;o+=1)if(i=e.apply(c[o],r),e.truthy(i))return i;return i}if("filter"===u)return l=e.apply(c[0],r),a=c[1],Array.isArray(l)?l.filter((function(t){return e.truthy(e.apply(a,t))})):[];if("map"===u)return l=e.apply(c[0],r),a=c[1],Array.isArray(l)?l.map((function(t){return e.apply(a,t)})):[];if("reduce"===u)return l=e.apply(c[0],r),a=c[1],s=void 0!==c[2]?c[2]:null,Array.isArray(l)?l.reduce((function(t,n){return e.apply(a,{current:n,accumulator:t})}),s):s;if("all"===u){if(l=e.apply(c[0],r),a=c[1],!l.length)return!1;for(o=0;o<l.length;o+=1)if(!e.truthy(e.apply(a,l[o])))return!1;return!0}if("none"===u)return 0===e.apply({filter:c},r).length;if("some"===u)return e.apply({filter:c},r).length>0;if(c=c.map((function(t){return e.apply(t,r)})),t.hasOwnProperty(u)&&"function"==typeof t[u])return t[u].apply(r,c);if(u.indexOf(".")>0){var f=String(u).split("."),p=t;for(o=0;o<f.length;o++){if(!p.hasOwnProperty(f[o]))throw new Error("Unrecognized operation "+u+" (failed at "+f.slice(0,o+1).join(".")+")");p=p[f[o]]}return p.apply(r,c)}throw new Error("Unrecognized operation "+u)},e.uses_data=function(t){var n=[];if(e.is_logic(t)){var r=e.get_operator(t),o=t[r];Array.isArray(o)||(o=[o]),"var"===r?n.push(o[0]):o.map((function(t){n.push.apply(n,e.uses_data(t))}))}return function(e){for(var t=[],n=0,r=e.length;n<r;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(n)},e.add_operation=function(e,n){t[e]=n},e.rm_operation=function(e){delete t[e]},e.rule_like=function(t,n){if(n===t)return!0;if("@"===n)return!0;if("number"===n)return"number"==typeof t;if("string"===n)return"string"==typeof t;if("array"===n)return Array.isArray(t)&&!e.is_logic(t);if(e.is_logic(n)){if(e.is_logic(t)){var r=e.get_operator(n),o=e.get_operator(t);if("@"===r||r===o)return e.rule_like(e.get_values(t,!1),e.get_values(n,!1))}return!1}if(Array.isArray(n)){if(Array.isArray(t)){if(n.length!==t.length)return!1;for(var i=0;i<n.length;i+=1)if(!e.rule_like(t[i],n[i]))return!1;return!0}return!1}return!1},e}();var m=d.exports;function g(e,t){let n=e.id,r=u.detachedOrganismIds;r.includes(n)||(r.push(n),r.length<=s.maxDetachedOrganisms||!t||h())}function h(){let e=u.organismIdMap;u.detachedOrganismIds.forEach((function(t){e.delete(t),u.organismTypeMap.get(e.get(t).type).organismIdMap.delete(t)})),u.detachedOrganismIds=[]}var y,v={exports:{}};y=v,function(){function e(e){return"object"===f(e)}function t(e){return null==e}function n(e,t){if(!t)throw new Error("Assertion Failed: "+e)}function r(e,t){return n("Cannot call get with "+t+" key.",!!t),n("Cannot call get with '"+t+"' on an undefined object.",void 0!==e),-1!==t.indexOf(".")?o(e,t):e[t]}function o(e,t){var n,o=t.split("."),i=o.length;for(n=0;null!=e&&n<i;n++)e=r(e,o[n]);return e}function i(e,t,r,a){return n("Cannot call set with "+t+" key.",!!t),-1!==t.indexOf(".")?function(e,t,n,r){var a=t.slice(t.lastIndexOf(".")+1);if(t=t===a?a:t.slice(0,t.length-(a.length+1)),!a||0===a.length)throw new Error("Property set failed: You passed an empty path");if(!(e=o(e,t))){if(r)return;throw new Error('Property set failed: object in path "'+t+'" could not be found or was destroyed.')}return i(e,a,n)}(e,t,r,a):(n("You need to provide an object and key to `set`.",!!e&&void 0!==t),e[t]=r,r)}var a,l={},s=Object.prototype.toString,u="Boolean Number String Function Array Date RegExp Object".split(" "),c=u.length;for(a=0;a<c;a++)l["[object "+u[a]+"]"]=u[a].toLowerCase();function f(e){var t=null==e?String(e):l[s.call(e)]||"object";return"object"===t&&(e instanceof Error?t="error":e instanceof Date&&(t="date")),t}var p={map:function o(a,l){e(a)||n("`source` should be an object",!1),e(l)||n("`map` should be an object",!1);var s={};return function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}(l).forEach((function(u){var c,p,d,m,g=l[u],h=e(g)?function(e,o){var i,a=r(o,"key"),l=r(o,"default"),s=r(o,"custom");return n("`key` or `default` should be defined",!t(s)||!(t(l)&&t(a))),i=t(s)?t(l)?r(e,a):t(a)?l:function(e,t,n){var o=r(e,t);return void 0===o?n:o}(e,a,l):s(e),i}(a,g):r(a,g);"undefined"!==f(h)&&("array"===f(h)&&(h=h.map((function(e){var n=r(g,"map");return t(n)?e:o(e,n)}))),c=s,p=h,d=u.split("."),m="",d.forEach((function(e,o){n("path parts can't be empty",e.length),m.length?m+="."+e:m=e,o!==d.length-1?t(r(c,m))&&i(c,m,{}):i(c,m,p)})))})),s}};y.exports=p}.call(p);var b=v.exports;function w(e,t){let n=u.eventListenersMap,r=e.trim()+"#"+t.trim();n.has(r)||n.set(r,[])}function A(e,t,n,r){let o=!1,i=u.eventListenersMap;e&&t?(t=e.trim()+"#"+t.trim(),i.has(t)||(o=!0)):t="*",n&&"function"!=typeof n&&(console.error("Invalid event listener: "+n),o=!0),o||(n.stateful=r,i.get(t).push(n))}function T(e,t,n,r){let o=!1,i=u.organismIdMap;e&&i.has(e)||(console.error("Undeclared weidget: "+e),o=!0),e&&(t=t||i.get(e).type,n=t.trim()+"#"+n.trim());let a=u.eventListenersMap;n&&a.has(n)||(console.error(l+n),o=!0),r||(console.error("Invalid event: "+r),o=!0),o||(a.get(n).forEach((t=>{t(i.get(e),r,t.stateful)})),a.get("*").forEach((t=>{t(i.get(e),{type:n,data:r},t.stateful)})))}function E(e,t){if(!t)return null;if(""===(t=t.trim()))return null;if(t.includes("#")){let n=t.split("#"),r=n[0].trim();if(""===r)return null;if(e=r,r=n[1].trim(),""===r)return null;t=r}else{if(!e)return null;if(""===(e=e.trim()))return null}return{organismType:e,eventType:t}}function x(e,t,n,r,o){let i=u.organismIdMap.get(e),a=i.typeRef,l=u.organismTypeMap.get(a),s=!1;return o.forEach((function(o){let u=E(a,o.sourceEventType);if(t===u.organismType&&n===u.eventName){let c={source:{id:e,type:a,group:i.group},target:{id:null,type:null,group:null},config:l.config,params:i.params,state:i.state,eventType:{organismType:t,eventName:n},event:r};u=E(a,o.targetEventType);try{let t=b.map(c,o.mapping);T(e,u.organismType,u.eventName,t),s=!0}catch(e){}}})),s}function S(t,n){return function(i,a,l){let c=0;n.organismIdMap.forEach((function(f){let p=t.organismType,d=t.eventType;if(d.startsWith("_")&&i.id!==f.id)return;let h=function(){if(!document.body.contains(f.element))return void g(f,!0);let h,y=f.type,v=u.webWorkerMap,b=v.get(y);if(b)h=b.webWorker,b.timestamp=(new Date).getTime();else{if(h=new Worker(n.controller),h.onmessage=t=>function(t){if(t.isAsync){let e=t.organismId,n=t.organismType,r=t.eventName,o=t.eventData,i=u.organismIdMap.get(e).adaptors;return i&&x(e,n,r,o,i),void T(e,n,r,o)}let n=t.target.id,i=u.organismIdMap.get(n),a=i.type,l=u.organismTypeMap.get(a);t.cookie.valuesToSet.forEach((e=>{let t=e.name+"="+e.value+";",n=e.attributes;for(const r in e.attributes)t+=" "+r+"="+n[r]+";";document.cookie=t})),t.cookie.valuesToRemove.forEach((e=>{document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}));let c="ORGANISM."+i.group,f=window.localStorage,p=t.localStorage,d=p.setValue;d&&f.setItem(c,d),p.clearValue&&f.removeItem(c),f=window.sessionStorage,p=t.sessionStorage,d=p.setValue,p.setValue&&f.setItem(c,d),p.clearValue&&f.removeItem(c);let m=i.element;t.filter&&(i.filter=t.filter,s.syncAttributes&&m.setAttribute(r,JSON.stringify(t.filter))),t.state&&(i.state=t.state,s.syncAttributes&&m.setAttribute(o,JSON.stringify(t.state)));let g=t.model,h=t.body,y=l.adapter;if((g||h)&&y){let e=i.adapter;e?e.patch(g,h):(i.adapter=y(),i.adapter.init(l,i,g,h))}t.eventType===e&&(u.initializeing--,0===u.initializeing&&(u.postInitializeQueue.forEach((e=>e())),u.postInitializeQueue=[]));let v=i.adaptors;t.events.forEach((function(e){let t=e.organismId,n=e.organismType,r=e.eventName,o=e.eventData;v&&Array.isArray(v)&&x(t,n,r,o,v)||T(e.organismId,e.organismType,e.eventName,e.eventData)}));let b=i.eventQueue;if(t.stateful&&b){if(0===b.length)return void(i.eventQueue=null);b.shift()()}}(t.data),b={webWorker:h,timestamp:(new Date).getTime()},v.size>=s.maxWebWorkerSize){let e=Array.from(v.entries());e.sort(((e,t)=>t[1].timestamp-e[1].timestamp));let t=e[0];v.remove(t[0]),t[1].webWorker.terminate()}v.set(y,b)}let w=null,A=null,E=null;i&&(w=i.id,A=i.type,E=i.group);let S=null,N=null,M=null;f&&(S=f.id,N=f.type,M=f.group);let O=n.config,k=f.params,C=f.state,L=f.filter;if(L&&Object.getOwnPropertyNames(L).length>0){let e={source:{id:w,type:A,group:E},target:{id:S,type:N,group:M},config:O,params:k,state:C,eventType:{organismType:p,eventName:d},event:a,eventHandleCount:c};try{if(!m.apply(L,e))return}catch(e){}c++}let _=u.organismGroupMap.get(M);_&&(_.cookieValue=document.cookie.split(";").map((e=>e.trim().startsWith(M)?e.trim()+";":"")).reduce(((e,t)=>e+t)),_.localStorageValue=window.localStorage.getItem("ORGANISM."+M),_.sessionStorageValue=window.sessionStorage.getItem("ORGANISM."+M));let I={sourceOrganismId:w,sourceOrganismType:A,sourceOrganismGroup:E,targetOrganismId:S,targetOrganismType:N,targetOrganismGroup:M,session:_,currentFilter:L,futureFilter:L,currentState:C,futureState:C,eventType:p.trim()+"#"+d.trim(),event:a,stateful:l};t.eventType===e&&(I.config=O,I.params=k),h.postMessage(I)};if(l){let e=f.eventQueue;e?e.push(h):(f.eventQueue=[],h())}else h()}))}}function N(e,t){return e[t]|e[t+1]<<8}function M(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])}function O(e,t){var n=e.length;if(t<=n)return e;var r=new Uint8Array(Math.max(n<<1,t));return r.set(e,0),r}function k(e,t,n,r,o,i){for(var a=R,l=U,s=0;s<n;){var u=e[l(r,o)&t];o+=15&u;var c=u>>>4;if(c<=15)i[s]=c,s++;else{var f=0,p=0;16==c?(p=3+a(r,o,2),o+=2,f=i[s-1]):17==c?(p=3+a(r,o,3),o+=3):18==c&&(p=11+a(r,o,7),o+=7);for(var d=s+p;s<d;)i[s]=f,s++}}return o}function C(e,t,n,r){for(var o=0,i=0,a=r.length>>>1;i<n;){var l=e[i+t];r[i<<1]=0,r[1+(i<<1)]=l,l>o&&(o=l),i++}for(;i<a;)r[i<<1]=0,r[1+(i<<1)]=0,i++;return o}function L(e,t){for(var n,r,o,i,a=e.length,l=z.bl_count,s=0;s<=t;s++)l[s]=0;for(s=1;s<a;s+=2)l[e[s]]++;var u=z.next_code;for(n=0,l[0]=0,r=1;r<=t;r++)n=n+l[r-1]<<1,u[r]=n;for(o=0;o<a;o+=2)0!=(i=e[o+1])&&(e[o]=u[i],u[i]++)}function _(e,t,n){for(var r=e.length,o=z.rev15,i=0;i<r;i+=2)if(0!=e[i+1])for(var a=i>>1,l=e[i+1],s=a<<4|l,u=t-l,c=e[i]<<u,f=c+(1<<u);c!=f;)n[o[c]>>>15-t]=s,c++}function I(e,t){for(var n=z.rev15,r=15-t,o=0;o<e.length;o+=2){var i=e[o]<<t-e[o+1];e[o]=n[i]>>>r}}function R(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<n)-1}function D(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<n)-1}function U(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)}const z=(j=Uint16Array,F=Uint32Array,{next_code:new j(16),bl_count:new j(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new j(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new F(32),flmap:new j(512),fltree:[],fdmap:new j(32),fdtree:[],lmap:new j(32768),ltree:[],ttree:[],dmap:new j(32768),dtree:[],imap:new j(512),itree:[],rev15:new j(32768),lhst:new F(286),dhst:new F(30),ihst:new F(19),lits:new F(15e3),strt:new j(65536),prev:new j(32768)});var j,F;!function(){for(var e=0;e<32768;e++){var t=e;t=(4278255360&(t=(4042322160&(t=(3435973836&(t=(2863311530&t)>>>1|(1431655765&t)<<1))>>>2|(858993459&t)<<2))>>>4|(252645135&t)<<4))>>>8|(16711935&t)<<8,z.rev15[e]=(t>>>16|t<<16)>>>17}function n(e,t,n){for(;0!=t--;)e.push(0,n)}for(e=0;e<32;e++)z.ldef[e]=z.of0[e]<<3|z.exb[e],z.ddef[e]=z.df0[e]<<4|z.dxb[e];n(z.fltree,144,8),n(z.fltree,112,9),n(z.fltree,24,7),n(z.fltree,8,8),L(z.fltree,9),_(z.fltree,9,z.flmap),I(z.fltree,9),n(z.fdtree,32,5),L(z.fdtree,5),_(z.fdtree,5,z.fdmap),I(z.fdtree,5),n(z.itree,19,0),n(z.ltree,286,0),n(z.dtree,30,0),n(z.ttree,320,0)}();const B={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var n=t,r=0;r<8;r++)1&n?n=3988292384^n>>>1:n>>>=1;e[t]=n}return e}(),update:function(e,t,n,r){for(var o=0;o<r;o++)e=B.table[255&(e^t[n+o])]^e>>>8;return e},crc:function(e,t,n){return 4294967295^B.update(4294967295,e,t,n)}};function W(e,t,n,r,o,i){var a=N,l=M;l(e,t),a(e,t+=4),a(e,t+=2);var s=a(e,t+=2);l(e,t+=2),l(e,t+=4),t+=4;var u=a(e,t+=8),c=a(e,t+=2),f=function(e,t,n){for(var r,o,i="",a=0;a<n;a++)i+="%"+((o=e[t+a].toString(16)).length<2?"0"+o:o);try{r=decodeURIComponent(i)}catch(r){return function(e,t,n){for(var r="",o=0;o<n;o++)r+=String.fromCharCode(e[t+o]);return r}(e,t,n)}return r}(e,t+=2,u);if(t+=u,t+=c,i)n[f]={size:o,csize:r};else{var p=new Uint8Array(e.buffer,t);if(0==s)n[f]=new Uint8Array(p.buffer.slice(t,t+r));else{if(8!=s)throw"unknown compression method: "+s;var d=new Uint8Array(o);!function(e,t){!function(e,t){var n=Uint8Array;if(3==e[0]&&0==e[1])return t||new n(0);var r=D,o=R,i=k,a=U,l=null==t;l&&(t=new n(e.length>>>2<<3));for(var s,u,c=0,f=0,p=0,d=0,m=0,g=0,h=0,y=0,v=0;0==c;)if(c=r(e,v,1),f=r(e,v+1,2),v+=3,0!=f){if(l&&(t=O(t,y+(1<<17))),1==f&&(s=z.flmap,u=z.fdmap,g=511,h=31),2==f){p=o(e,v,5)+257,d=o(e,v+5,5)+1,m=o(e,v+10,4)+4,v+=14;for(var b=0;b<38;b+=2)z.itree[b]=0,z.itree[b+1]=0;var w=1;for(b=0;b<m;b++){var A=o(e,v+3*b,3);z.itree[1+(z.ordr[b]<<1)]=A,A>w&&(w=A)}v+=3*m,L(z.itree,w),_(z.itree,w,z.imap),s=z.lmap,u=z.dmap,v=i(z.imap,(1<<w)-1,p+d,e,v,z.ttree);var T=C(z.ttree,0,p,z.ltree);g=(1<<T)-1;var E=C(z.ttree,p,d,z.dtree);h=(1<<E)-1,L(z.ltree,T),_(z.ltree,T,s),L(z.dtree,E),_(z.dtree,E,u)}for(;;){var x=s[a(e,v)&g];v+=15&x;var S=x>>>4;if(S>>>8==0)t[y++]=S;else{if(256==S)break;var N=y+S-254;if(S>264){var M=z.ldef[S-257];N=y+(M>>>3)+o(e,v,7&M),v+=7&M}var I=u[a(e,v)&h];v+=15&I;var j=I>>>4,F=z.ddef[j],B=(F>>>4)+r(e,v,15&F);for(v+=15&F,l&&(t=O(t,y+(1<<17)));y<N;)t[y]=t[y++-B],t[y]=t[y++-B],t[y]=t[y++-B],t[y]=t[y++-B];y=N}}}else{0!=(7&v)&&(v+=8-(7&v));var W=4+(v>>>3),P=e[W-4]|e[W-3]<<8;l&&(t=O(t,y+P)),t.set(new n(e.buffer,e.byteOffset+W,P),y),v=W+P<<3,y+=P}t.length==y||t.slice(0,y)}(e,t)}(p,d),n[f]=d}}}function P(e,t,n,r,o){if(!e)return o&&console.error("Undeclared required resource: "+n),void r();!function(e,t){let n=new XMLHttpRequest;n.timeout=5e3,n.open("GET",e,!0),n.onreadystatechange=function(){if(4===n.readyState){if(0===n.status)return void t(408,null);t(n.status,n.responseText)}},n.ontimeout=function(e){t(408,null)},n.send()}(e,(function(i,l){if(200===i)return t.source?t.source[n]=l:t[n]=c(l),void r();o&&console.error(a+e),t[n]=null,r()}))}function H(e,t,n,r){function o(e,t,n){t[n]=e?(new TextDecoder).decode(e):null}fetch(e).then((function(e){e.ok&&e.arrayBuffer().then((function(e){let i=function(e,t){for(var n=N,r=M,o=0,i={},a=new Uint8Array(e),l=a.length-4;101010256!=r(a,l);)l--;o=l,o+=4;var s=n(a,o+=4);n(a,o+=2);var u=r(a,o+=2),c=r(a,o+=4);o+=4,o=c;for(var f=0;f<s;f++){r(a,o),o+=4,o+=4,o+=4,r(a,o+=4),u=r(a,o+=4);var p=r(a,o+=4),d=n(a,o+=4),m=n(a,o+2),g=n(a,o+4);o+=6;var h=r(a,o+=8);o+=4,o+=d+m+g,W(a,h,i,u,p,undefined)}return i}(e),a={zipped:!0};o(i["config.json"],a,"config"),o(i["style.css"],a,"style"),o(i["view.js"],a,"view"),o(i["controller.js"],a,"controller"),t[n]=a,r()}))})).catch((function(t){console.error(a+e),r()}))}function G(e,t){let n=4,r=e.source;function o(){if(--n<=0){e.config=c(e.source.config),e.isDaemon=e.config.isDaemon,e.adapter=function(e){let t=s.adapters.get(e);return t||console.error("Adapter does not exist: "+e),t}(e.config.adapter),delete e.source.config;let n=e.source.style;n&&!1!==e.config.applyStyle&&function(e,t){var n=document.createElement("link");n.rel="stylesheet",n.href=window.URL.createObjectURL(new Blob([t],{type:"text/css"})),n.setAttribute(i,!0),document.getElementsByTagName("head")[0].appendChild(n)}(0,n),delete e.source.style;let r=s.env.get("*")??{},o=s.env.get(e.type)??{};e.controller=function(e,t,n){function r(e,t,n){return(r,o,i)=>{let a,l,s;if(r&&o&&i)a=r,l=o,s=i;else{if(!r||!o||i)return;{let e=r.split("#");e.length>1?(a=e[0].trim(),l=e[1].trim()):(a=t,l=r),s=o}}let u={organismId:e,organismType:a.trim(),eventName:l.trim(),eventData:s};n.emitEvent?n.events.push(u):(u.isAsync=!0,self.postMessage(u))}}return window.URL.createObjectURL(new Blob([`${r.toString()}let eventListeners = new Map();self.getEnv=function(){return ${JSON.stringify(n)};};\nself.setEventListener=${function(){let e,t;if(3===arguments.length)e=arguments[0].trim()+"#"+arguments[1].trim(),t=arguments[2];else{if(2!==arguments.length)return;e=arguments[0],t=arguments[1]}eventListeners.set(e,t)}.toString()};\n${t}self.render=view;(function(setEventListener) {\n${e}\ncontroller(setEventListener);})(setEventListener);self.onmessage=${function(e){let t=e.data,n={group:null,value:null},o={group:null,valuesToSet:[],valuesToRemove:[]},i={value:null},a={setValue:null,clearValue:!1},l={value:null},s={setValue:null,clearValue:!1};n.group=o.group=t.session.group,n.get=function(e){let t=n.value.match(new RegExp(n.group+"_"+e+"=([^;]+)"));return t?t[1]:null},n.getAll=function(){let e=[];return n.value.split(";").forEach((function(t){let r=t.trim().split("=");if(2===r.length){let t=r[0].trim(),o=r[1].trim();""!==t&&""!==o&&t.startsWith(n.group+"_")&&e.push({name:t,value:o})}})),e},n.value=o.value=t.session.cookieValue,o.set=function(e,t,n){o.valuesToSet.push({name:o.group+"_"+e,value:t,attributes:n})},o.remove=function(e){o.valuesToRemove.push(o.group+"_"+e)},i.value=t.session.localStorageValue,i.get=function(){return i.value},a.set=function(e){a.setValue=e},a.clear=function(){a.clearValue=!0},l.value=t.session.sessionStorageValue,l.get=function(){return l.value},s.set=function(e){s.setValue=e},s.clear=function(){s.clearValue=!0};let u=t.eventType,c=t.targetOrganismId,f=t.targetOrganismType,p={source:{id:t.sourceOrganismId,type:t.sourceOrganismType,group:t.sourceOrganismGroup},cookie:n,localStorage:i,sessionStorage:l,filter:t.currentFilter,state:t.currentState,eventType:u,event:t.event};t.config&&(p.config=t.config),t.params&&(p.params=t.params);let d={target:{id:c,type:f,group:t.targetOrganismGroup},cookie:o,localStorage:a,sessionStorage:s,filter:t.futureFilter,state:t.futureState,model:null,body:null,events:[]};d.emitEvent=r(c,f,d);let m=eventListeners.get(u);if(!m){let e=u.split("#");if(e.length<2)return;let t=e[0].trim();if(u=e[1].trim(),m=eventListeners.get(u),!m||t!==f)return}let g=getEnv();m(p,d,g);let h=d.model;!d.body&&h&&render&&(d.body=render(h,g)),d.body&&(d.model=null),delete o.group,delete o.value,delete o.set,delete o.remove,delete a.set,delete a.clear,delete s.set,delete s.clear,delete d.emitEvent,d.eventType=u,d.target={id:c,type:f},d.stateful=t.stateful,self.postMessage(d)}.toString()};`],{type:"text/javascript"}))}(e.source.controller,e.source.view?e.source.view:"var view = null;",Object.assign(r,o)),delete e.source.controller,delete e.source.view,delete e.source.zipped,delete e.source,t()}}r&&!r.zipped?(P(r.configURL,e,"config",o,!0),P(r.styleURL,e,"style",o,!1),P(r.viewURL,e,"view",o,!1),P(r.controllerURL,e,"controller",o,!0)):(n=0,o())}function V(e,t,n){e&&e.forEach((function(e){let r=t.type,o=E(r,e);if(o){let e=o.organismType.trim(),i=o.eventType.trim();if(r===e)u.eventListenersMap.has(e+"#"+i)||w(e,i);else if(i.startsWith("_"))return void console.error("Cannot access private event: "+i);A(o.organismType,o.eventType,S(o,t),n)}}))}function q(e){let t=e.organismAliases;if(t)return t;let n=e.parentElement;return n?q(n):null}!function(e){function t(){}function n(e,t){if(e=void 0===e?"utf-8":e,t=void 0===t?{fatal:!1}:t,-1===o.indexOf(e.toLowerCase()))throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('"+e+"') is invalid.");if(t.fatal)throw Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}function r(e){for(var t=0,n=Math.min(65536,e.length+1),r=new Uint16Array(n),o=[],i=0;;){var a=t<e.length;if(!a||i>=n-1){if(o.push(String.fromCharCode.apply(null,r.subarray(0,i))),!a)return o.join("");e=e.subarray(t),i=t=0}if(0==(128&(a=e[t++])))r[i++]=a;else if(192==(224&a)){var l=63&e[t++];r[i++]=(31&a)<<6|l}else if(224==(240&a)){l=63&e[t++];var s=63&e[t++];r[i++]=(31&a)<<12|l<<6|s}else 240==(248&a)&&(65535<(a=(7&a)<<18|(l=63&e[t++])<<12|(s=63&e[t++])<<6|63&e[t++])&&(a-=65536,r[i++]=a>>>10&1023|55296,a=56320|1023&a),r[i++]=a)}}if(e.TextEncoder&&e.TextDecoder)return!1;var o=["utf-8","utf8","unicode-1-1-utf-8"];Object.defineProperty(t.prototype,"encoding",{value:"utf-8"}),t.prototype.encode=function(e,t){if((t=void 0===t?{stream:!1}:t).stream)throw Error("Failed to encode: the 'stream' option is unsupported.");t=0;for(var n=e.length,r=0,o=Math.max(32,n+(n>>>1)+7),i=new Uint8Array(o>>>3<<3);t<n;){var a=e.charCodeAt(t++);if(55296<=a&&56319>=a){if(t<n){var l=e.charCodeAt(t);56320==(64512&l)&&(++t,a=((1023&a)<<10)+(1023&l)+65536)}if(55296<=a&&56319>=a)continue}if(r+4>i.length&&(o+=8,o=(o*=1+t/e.length*2)>>>3<<3,(l=new Uint8Array(o)).set(i),i=l),0==(4294967168&a))i[r++]=a;else{if(0==(4294965248&a))i[r++]=a>>>6&31|192;else if(0==(4294901760&a))i[r++]=a>>>12&15|224,i[r++]=a>>>6&63|128;else{if(0!=(4292870144&a))continue;i[r++]=a>>>18&7|240,i[r++]=a>>>12&63|128,i[r++]=a>>>6&63|128}i[r++]=63&a|128}}return i.slice?i.slice(0,r):i.subarray(0,r)},Object.defineProperty(n.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(n.prototype,"fatal",{value:!1}),Object.defineProperty(n.prototype,"ignoreBOM",{value:!1});var i=r;"function"==typeof Buffer&&Buffer.from?i=function(e){return Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf-8")}:"function"==typeof Blob&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&(i=function(e){var t=URL.createObjectURL(new Blob([e],{type:"text/plain;charset=UTF-8"}));try{var n=new XMLHttpRequest;return n.open("GET",t,!1),n.send(),n.responseText}catch(t){return r(e)}finally{URL.revokeObjectURL(t)}}),n.prototype.decode=function(e,t){if((t=void 0===t?{stream:!1}:t).stream)throw Error("Failed to decode: the 'stream' option is unsupported.");return e=e instanceof Uint8Array?e:e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer):new Uint8Array(e),i(e)},e.TextEncoder=t,e.TextDecoder=n}("undefined"!=typeof window?window:p);var $,Q,Y={exports:{}},J={exports:{}};$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Q={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&Q.rotl(e,8)|4278255360&Q.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=Q.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var t=[],n=0;n<e.length;n+=3)for(var r=e[n]<<16|e[n+1]<<8|e[n+2],o=0;o<4;o++)8*n+6*o<=8*e.length?t.push($.charAt(r>>>6*(3-o)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],n=0,r=0;n<e.length;r=++n%4)0!=r&&t.push(($.indexOf(e.charAt(n-1))&Math.pow(2,-2*r+8)-1)<<2*r|$.indexOf(e.charAt(n))>>>6-2*r);return t}},J.exports=Q;var X={utf8:{stringToBytes:function(e){return X.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(X.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}},K=X,Z=function(e){return null!=e&&(ee(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&ee(e.slice(0,0))}(e)||!!e._isBuffer)};function ee(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}!function(){var e=J.exports,t=K.utf8,n=Z,r=K.bin,o=function(i,a){i.constructor==String?i=a&&"binary"===a.encoding?r.stringToBytes(i):t.stringToBytes(i):n(i)?i=Array.prototype.slice.call(i,0):Array.isArray(i)||i.constructor===Uint8Array||(i=i.toString());for(var l=e.bytesToWords(i),s=8*i.length,u=1732584193,c=-271733879,f=-1732584194,p=271733878,d=0;d<l.length;d++)l[d]=16711935&(l[d]<<8|l[d]>>>24)|4278255360&(l[d]<<24|l[d]>>>8);l[s>>>5]|=128<<s%32,l[14+(s+64>>>9<<4)]=s;var m=o._ff,g=o._gg,h=o._hh,y=o._ii;for(d=0;d<l.length;d+=16){var v=u,b=c,w=f,A=p;u=m(u,c,f,p,l[d+0],7,-680876936),p=m(p,u,c,f,l[d+1],12,-389564586),f=m(f,p,u,c,l[d+2],17,606105819),c=m(c,f,p,u,l[d+3],22,-1044525330),u=m(u,c,f,p,l[d+4],7,-176418897),p=m(p,u,c,f,l[d+5],12,1200080426),f=m(f,p,u,c,l[d+6],17,-1473231341),c=m(c,f,p,u,l[d+7],22,-45705983),u=m(u,c,f,p,l[d+8],7,1770035416),p=m(p,u,c,f,l[d+9],12,-1958414417),f=m(f,p,u,c,l[d+10],17,-42063),c=m(c,f,p,u,l[d+11],22,-1990404162),u=m(u,c,f,p,l[d+12],7,1804603682),p=m(p,u,c,f,l[d+13],12,-40341101),f=m(f,p,u,c,l[d+14],17,-1502002290),u=g(u,c=m(c,f,p,u,l[d+15],22,1236535329),f,p,l[d+1],5,-165796510),p=g(p,u,c,f,l[d+6],9,-1069501632),f=g(f,p,u,c,l[d+11],14,643717713),c=g(c,f,p,u,l[d+0],20,-373897302),u=g(u,c,f,p,l[d+5],5,-701558691),p=g(p,u,c,f,l[d+10],9,38016083),f=g(f,p,u,c,l[d+15],14,-660478335),c=g(c,f,p,u,l[d+4],20,-405537848),u=g(u,c,f,p,l[d+9],5,568446438),p=g(p,u,c,f,l[d+14],9,-1019803690),f=g(f,p,u,c,l[d+3],14,-187363961),c=g(c,f,p,u,l[d+8],20,1163531501),u=g(u,c,f,p,l[d+13],5,-1444681467),p=g(p,u,c,f,l[d+2],9,-51403784),f=g(f,p,u,c,l[d+7],14,1735328473),u=h(u,c=g(c,f,p,u,l[d+12],20,-1926607734),f,p,l[d+5],4,-378558),p=h(p,u,c,f,l[d+8],11,-2022574463),f=h(f,p,u,c,l[d+11],16,1839030562),c=h(c,f,p,u,l[d+14],23,-35309556),u=h(u,c,f,p,l[d+1],4,-1530992060),p=h(p,u,c,f,l[d+4],11,1272893353),f=h(f,p,u,c,l[d+7],16,-155497632),c=h(c,f,p,u,l[d+10],23,-1094730640),u=h(u,c,f,p,l[d+13],4,681279174),p=h(p,u,c,f,l[d+0],11,-358537222),f=h(f,p,u,c,l[d+3],16,-722521979),c=h(c,f,p,u,l[d+6],23,76029189),u=h(u,c,f,p,l[d+9],4,-640364487),p=h(p,u,c,f,l[d+12],11,-421815835),f=h(f,p,u,c,l[d+15],16,530742520),u=y(u,c=h(c,f,p,u,l[d+2],23,-995338651),f,p,l[d+0],6,-198630844),p=y(p,u,c,f,l[d+7],10,1126891415),f=y(f,p,u,c,l[d+14],15,-1416354905),c=y(c,f,p,u,l[d+5],21,-57434055),u=y(u,c,f,p,l[d+12],6,1700485571),p=y(p,u,c,f,l[d+3],10,-1894986606),f=y(f,p,u,c,l[d+10],15,-1051523),c=y(c,f,p,u,l[d+1],21,-2054922799),u=y(u,c,f,p,l[d+8],6,1873313359),p=y(p,u,c,f,l[d+15],10,-30611744),f=y(f,p,u,c,l[d+6],15,-1560198380),c=y(c,f,p,u,l[d+13],21,1309151649),u=y(u,c,f,p,l[d+4],6,-145523070),p=y(p,u,c,f,l[d+11],10,-1120210379),f=y(f,p,u,c,l[d+2],15,718787259),c=y(c,f,p,u,l[d+9],21,-343485551),u=u+v>>>0,c=c+b>>>0,f=f+w>>>0,p=p+A>>>0}return e.endian([u,c,f,p])};o._ff=function(e,t,n,r,o,i,a){var l=e+(t&n|~t&r)+(o>>>0)+a;return(l<<i|l>>>32-i)+t},o._gg=function(e,t,n,r,o,i,a){var l=e+(t&r|n&~r)+(o>>>0)+a;return(l<<i|l>>>32-i)+t},o._hh=function(e,t,n,r,o,i,a){var l=e+(t^n^r)+(o>>>0)+a;return(l<<i|l>>>32-i)+t},o._ii=function(e,t,n,r,o,i,a){var l=e+(n^(t|~r))+(o>>>0)+a;return(l<<i|l>>>32-i)+t},o._blocksize=16,o._digestsize=16,Y.exports=function(t,n){if(null==t)throw new Error("Illegal argument "+t);var i=e.wordsToBytes(o(t,n));return n&&n.asBytes?i:n&&n.asString?r.bytesToString(i):e.bytesToHex(i)}}();var te=Y.exports;function ne(n,i){!function(n,r){let o=function(e){let t=[];return e.querySelectorAll("[data-organism-type]").forEach((function(e){let n=e.dataset.organismType;n&&(u.organismTypeMap.has(n)||t.push(e))})),t}(n),i=o.length;if(0===i)return void r();let a=u.organismTypeMap,l=[];o.forEach((function(o){let s=function(e){let t=e.dataset.organismType,n=e.dataset.organismDefinition;if(!n)return console.error("Organism definition required for organism type: "+t),null;let r=c(n);return r&&(n=r),{type:t,element:e,organismIdMap:new Map,definition:n}}(o),u=s.type;if(!s||a.has(u))return void(0==--i&&r());a.set(u,s),l.push(s),function(e,t){let n=e.definition;n?"object"!=typeof n?(n=n.trim(),n.endsWith(".json")?P(n,e,"source",t,!0):n.endsWith(".zip")?H(n,e,"source",t):(n+=n.endsWith("/")&&n.endsWith("\\")?"":"/",e.source={configURL:n+"config.json",styleURL:n+"style.css",viewURL:n+"view.js",controllerURL:n+"controller.js"},t())):(e.source=n,t()):(e.source=null,t())}(s,(function(){G(s,(function(){!function(n){w(n.type,e),w(n.type,t);let r=n.config.events;r&&r.emit&&r.emit.forEach((function(e){let t=E(n.type,e);t&&w(t.organismType,t.eventType)}))}(s),0==--i&&(function(n){n.forEach((function(n){let r=E(n.type,e);A(n.type,e,S(r,n),!0),r=E(n.type,t),A(n.type,t,S(r,n),!0);let o=n.config.events;if(!o)return;let i=o.listen;i&&(V(i.stateful,n,!0),V(i.stateless,n,!1))}))}(l),delete s.definition,r())}))}));let f=o.dataset.organismAlias;if(f&&(f=f.trim(),""!==f)){let e=n.organismAliases;e||(e=n.organismAliases=new Map),e.set(f,u)}}))}(n,(function(){!function(n,i){let a=u.organismIdMap,l=[];(function(e){let t=[];return e.querySelectorAll("[data-organism-typeref]").forEach((function(n){let r=n.parentElement.closest("[data-organism-id]");if(r&&r!==e)return;let o=n.dataset.organismTyperef,i=q(e);o=i&&i.has(o)?i.get(o):o,n.dataset.organismId&&t.push(n)})),t})(n).forEach((function(t){let i=function(e,t){let n,r,o=t.dataset.organismId,i=o,a=e.dataset;a&&(n=a.organismId,r=a.organismGroup),o=(n?n+"_":"")+o,t.dataset.organismId=o;let l=t.dataset.organismGroup;l=(r?r+"_":"")+(l||i),t.dataset.organismGroup=l;let s=q(e),c=t.dataset.organismTyperef;c=s&&s.has(c)?s.get(c):c,t.id="_"+te(c+o);let f={id:o,type:c,group:l,element:t,adapter:null,state:null,filter:null,eventQueue:null},p=u.organismTypeMap;if(p.has(c)){let e=p.get(c).organismIdMap;e.has(o)||e.set(o,f)}else console.error("Undeclared organism type: "+c+" for organism: "+o);p=u.organismGroupMap;let d=p.get(l);return d||(d={group:l},p.set(l,d)),f}(n,t),f=i.id;a.set(f,i),function(e,t,n){let o=e.dataset.organismFilter;if(s.syncAttributes||e.removeAttribute(r),!o)return t.filter={},void n();let i=c(o);"object"!=typeof i&&o.trim().endsWith(".json")?P(o,t,"filter",n,!0):(t.filter=i,n())}(t,i,(function(){!function(e,t,n){let r=e.dataset.organismAdaptors;if(s.syncAttributes||e.removeAttribute("data-organism-adaptors"),!r)return t.adaptors=[],void n();let o=c(r);if(Array.isArray(o))return t.filter=o,void n();r.trim().endsWith(".json")?P(r,t,"adaptors",n,!0):(t.adaptors={},n())}(t,i,(function(){!function(e,t,n){let r=e.dataset.organismParams;if(s.syncAttributes||e.removeAttribute("data-organism-params"),r&&r.trim().endsWith(".json"))P(r,t,"paramMappings",n,!0);else{if(!r)return t.paramMappings=[],void n();t.paramMappings=c(r),n()}}(t,i,(function(){!function(e){let t=new URLSearchParams(window.location.search),n=Object.fromEntries(t.entries()),r=e.paramMappings;n&&r&&Array.isArray(r)&&(e.params={},r.forEach((function(t){try{Object.assign(e.params,b.map(n,t))}catch(e){}})))}(i),function(e,t,n){let r=e.dataset.organismState;if(s.syncAttributes||e.removeAttribute(o),r&&r.trim().endsWith(".json"))P(r,t,"state",n,!0);else{if(!r)return t.state={},void n();t.state=c(r),n()}}(t,i,(function(){T(f,null,e,{window:{width:window.innerWidth,height:window.innerHeight},organism:{width:t.offsetWidth,height:t.offsetHeight}}),l.push(f),u.initializeing++}))}))}))}))})),u.postInitializeQueue.push((function(){l.forEach((function(e){T(e,null,t,{})}))})),i&&(0===l.length?i():u.postInitializeQueue.push(i)),n!==document.body&&u.organismIdMap.get(n.dataset.organismId).adapter.scanComplete()}(n,i)}))}var re={exports:{}};
/*! @license DOMPurify 2.3.8 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.8/LICENSE */re.exports=function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,n){return t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(e,n)}function n(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function r(e,o,i){return r=n()?Reflect.construct:function(e,n,r){var o=[null];o.push.apply(o,n);var i=new(Function.bind.apply(e,o));return r&&t(i,r.prototype),i},r.apply(null,arguments)}function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=Object.hasOwnProperty,l=Object.setPrototypeOf,s=Object.isFrozen,u=Object.getPrototypeOf,c=Object.getOwnPropertyDescriptor,f=Object.freeze,p=Object.seal,d=Object.create,m="undefined"!=typeof Reflect&&Reflect,g=m.apply,h=m.construct;g||(g=function(e,t,n){return e.apply(t,n)}),f||(f=function(e){return e}),p||(p=function(e){return e}),h||(h=function(e,t){return r(e,o(t))});var y=M(Array.prototype.forEach),v=M(Array.prototype.pop),b=M(Array.prototype.push),w=M(String.prototype.toLowerCase),A=M(String.prototype.match),T=M(String.prototype.replace),E=M(String.prototype.indexOf),x=M(String.prototype.trim),S=M(RegExp.prototype.test),N=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return h(e,n)}}(TypeError);function M(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return g(e,t,r)}}function O(e,t){l&&l(e,null);for(var n=t.length;n--;){var r=t[n];if("string"==typeof r){var o=w(r);o!==r&&(s(t)||(t[n]=o),r=o)}e[r]=!0}return e}function k(e){var t,n=d(null);for(t in e)g(a,e,[t])&&(n[t]=e[t]);return n}function C(e,t){for(;null!==e;){var n=c(e,t);if(n){if(n.get)return M(n.get);if("function"==typeof n.value)return M(n.value)}e=u(e)}return function(e){return console.warn("fallback value for",e),null}}var L=f(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),_=f(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),I=f(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),R=f(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),D=f(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),U=f(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),z=f(["#text"]),j=f(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),F=f(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),B=f(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),W=f(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),P=p(/\{\{[\w\W]*|[\w\W]*\}\}/gm),H=p(/<%[\w\W]*|[\w\W]*%>/gm),G=p(/^data-[\-\w.\u00B7-\uFFFF]/),V=p(/^aria-[\-\w]+$/),q=p(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),$=p(/^(?:\w+script|data):/i),Q=p(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Y=p(/^html$/i),J=function(){return"undefined"==typeof window?null:window},X=function(t,n){if("object"!==e(t)||"function"!=typeof t.createPolicy)return null;var r=null,o="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(o)&&(r=n.currentScript.getAttribute(o));var i="dompurify"+(r?"#"+r:"");try{return t.createPolicy(i,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};var K=function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J(),r=function(e){return t(e)};if(r.version="2.3.8",r.removed=[],!n||!n.document||9!==n.document.nodeType)return r.isSupported=!1,r;var i=n.document,a=n.document,l=n.DocumentFragment,s=n.HTMLTemplateElement,u=n.Node,c=n.Element,p=n.NodeFilter,d=n.NamedNodeMap,m=void 0===d?n.NamedNodeMap||n.MozNamedAttrMap:d,g=n.HTMLFormElement,h=n.DOMParser,M=n.trustedTypes,K=c.prototype,Z=C(K,"cloneNode"),ee=C(K,"nextSibling"),te=C(K,"childNodes"),ne=C(K,"parentNode");if("function"==typeof s){var re=a.createElement("template");re.content&&re.content.ownerDocument&&(a=re.content.ownerDocument)}var oe=X(M,i),ie=oe?oe.createHTML(""):"",ae=a,le=ae.implementation,se=ae.createNodeIterator,ue=ae.createDocumentFragment,ce=ae.getElementsByTagName,fe=i.importNode,pe={};try{pe=k(a).documentMode?a.documentMode:{}}catch(e){}var de={};r.isSupported="function"==typeof ne&&le&&void 0!==le.createHTMLDocument&&9!==pe;var me,ge,he=P,ye=H,ve=G,be=V,we=$,Ae=Q,Te=q,Ee=null,xe=O({},[].concat(o(L),o(_),o(I),o(D),o(z))),Se=null,Ne=O({},[].concat(o(j),o(F),o(B),o(W))),Me=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Oe=null,ke=null,Ce=!0,Le=!0,_e=!1,Ie=!1,Re=!1,De=!1,Ue=!1,ze=!1,je=!1,Fe=!1,Be=!0,We=!0,Pe=!1,He={},Ge=null,Ve=O({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),qe=null,$e=O({},["audio","video","img","source","image","track"]),Qe=null,Ye=O({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Je="http://www.w3.org/1998/Math/MathML",Xe="http://www.w3.org/2000/svg",Ke="http://www.w3.org/1999/xhtml",Ze=Ke,et=!1,tt=["application/xhtml+xml","text/html"],nt="text/html",rt=null,ot=a.createElement("form"),it=function(e){return e instanceof RegExp||e instanceof Function},at=function(t){rt&&rt===t||(t&&"object"===e(t)||(t={}),t=k(t),Ee="ALLOWED_TAGS"in t?O({},t.ALLOWED_TAGS):xe,Se="ALLOWED_ATTR"in t?O({},t.ALLOWED_ATTR):Ne,Qe="ADD_URI_SAFE_ATTR"in t?O(k(Ye),t.ADD_URI_SAFE_ATTR):Ye,qe="ADD_DATA_URI_TAGS"in t?O(k($e),t.ADD_DATA_URI_TAGS):$e,Ge="FORBID_CONTENTS"in t?O({},t.FORBID_CONTENTS):Ve,Oe="FORBID_TAGS"in t?O({},t.FORBID_TAGS):{},ke="FORBID_ATTR"in t?O({},t.FORBID_ATTR):{},He="USE_PROFILES"in t&&t.USE_PROFILES,Ce=!1!==t.ALLOW_ARIA_ATTR,Le=!1!==t.ALLOW_DATA_ATTR,_e=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Ie=t.SAFE_FOR_TEMPLATES||!1,Re=t.WHOLE_DOCUMENT||!1,ze=t.RETURN_DOM||!1,je=t.RETURN_DOM_FRAGMENT||!1,Fe=t.RETURN_TRUSTED_TYPE||!1,Ue=t.FORCE_BODY||!1,Be=!1!==t.SANITIZE_DOM,We=!1!==t.KEEP_CONTENT,Pe=t.IN_PLACE||!1,Te=t.ALLOWED_URI_REGEXP||Te,Ze=t.NAMESPACE||Ke,t.CUSTOM_ELEMENT_HANDLING&&it(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Me.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&it(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Me.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Me.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),me=me=-1===tt.indexOf(t.PARSER_MEDIA_TYPE)?nt:t.PARSER_MEDIA_TYPE,ge="application/xhtml+xml"===me?function(e){return e}:w,Ie&&(Le=!1),je&&(ze=!0),He&&(Ee=O({},o(z)),Se=[],!0===He.html&&(O(Ee,L),O(Se,j)),!0===He.svg&&(O(Ee,_),O(Se,F),O(Se,W)),!0===He.svgFilters&&(O(Ee,I),O(Se,F),O(Se,W)),!0===He.mathMl&&(O(Ee,D),O(Se,B),O(Se,W))),t.ADD_TAGS&&(Ee===xe&&(Ee=k(Ee)),O(Ee,t.ADD_TAGS)),t.ADD_ATTR&&(Se===Ne&&(Se=k(Se)),O(Se,t.ADD_ATTR)),t.ADD_URI_SAFE_ATTR&&O(Qe,t.ADD_URI_SAFE_ATTR),t.FORBID_CONTENTS&&(Ge===Ve&&(Ge=k(Ge)),O(Ge,t.FORBID_CONTENTS)),We&&(Ee["#text"]=!0),Re&&O(Ee,["html","head","body"]),Ee.table&&(O(Ee,["tbody"]),delete Oe.tbody),f&&f(t),rt=t)},lt=O({},["mi","mo","mn","ms","mtext"]),st=O({},["foreignobject","desc","title","annotation-xml"]),ut=O({},["title","style","font","a","script"]),ct=O({},_);O(ct,I),O(ct,R);var ft=O({},D);O(ft,U);var pt=function(e){var t=ne(e);t&&t.tagName||(t={namespaceURI:Ke,tagName:"template"});var n=w(e.tagName),r=w(t.tagName);return e.namespaceURI===Xe?t.namespaceURI===Ke?"svg"===n:t.namespaceURI===Je?"svg"===n&&("annotation-xml"===r||lt[r]):Boolean(ct[n]):e.namespaceURI===Je?t.namespaceURI===Ke?"math"===n:t.namespaceURI===Xe?"math"===n&&st[r]:Boolean(ft[n]):e.namespaceURI===Ke&&!(t.namespaceURI===Xe&&!st[r])&&!(t.namespaceURI===Je&&!lt[r])&&!ft[n]&&(ut[n]||!ct[n])},dt=function(e){b(r.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=ie}catch(t){e.remove()}}},mt=function(e,t){try{b(r.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){b(r.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!Se[e])if(ze||je)try{dt(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},gt=function(e){var t,n;if(Ue)e="<remove></remove>"+e;else{var r=A(e,/^[\r\n\t ]+/);n=r&&r[0]}"application/xhtml+xml"===me&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var o=oe?oe.createHTML(e):e;if(Ze===Ke)try{t=(new h).parseFromString(o,me)}catch(e){}if(!t||!t.documentElement){t=le.createDocument(Ze,"template",null);try{t.documentElement.innerHTML=et?"":o}catch(e){}}var i=t.body||t.documentElement;return e&&n&&i.insertBefore(a.createTextNode(n),i.childNodes[0]||null),Ze===Ke?ce.call(t,Re?"html":"body")[0]:Re?t.documentElement:i},ht=function(e){return se.call(e.ownerDocument||e,e,p.SHOW_ELEMENT|p.SHOW_COMMENT|p.SHOW_TEXT,null,!1)},yt=function(e){return e instanceof g&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof m)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore)},vt=function(t){return"object"===e(u)?t instanceof u:t&&"object"===e(t)&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},bt=function(e,t,n){de[e]&&y(de[e],(function(e){e.call(r,t,n,rt)}))},wt=function(e){var t;if(bt("beforeSanitizeElements",e,null),yt(e))return dt(e),!0;if(S(/[\u0080-\uFFFF]/,e.nodeName))return dt(e),!0;var n=ge(e.nodeName);if(bt("uponSanitizeElement",e,{tagName:n,allowedTags:Ee}),e.hasChildNodes()&&!vt(e.firstElementChild)&&(!vt(e.content)||!vt(e.content.firstElementChild))&&S(/<[/\w]/g,e.innerHTML)&&S(/<[/\w]/g,e.textContent))return dt(e),!0;if("select"===n&&S(/<template/i,e.innerHTML))return dt(e),!0;if(!Ee[n]||Oe[n]){if(!Oe[n]&&Tt(n)){if(Me.tagNameCheck instanceof RegExp&&S(Me.tagNameCheck,n))return!1;if(Me.tagNameCheck instanceof Function&&Me.tagNameCheck(n))return!1}if(We&&!Ge[n]){var o=ne(e)||e.parentNode,i=te(e)||e.childNodes;if(i&&o)for(var a=i.length-1;a>=0;--a)o.insertBefore(Z(i[a],!0),ee(e))}return dt(e),!0}return e instanceof c&&!pt(e)?(dt(e),!0):"noscript"!==n&&"noembed"!==n||!S(/<\/no(script|embed)/i,e.innerHTML)?(Ie&&3===e.nodeType&&(t=e.textContent,t=T(t,he," "),t=T(t,ye," "),e.textContent!==t&&(b(r.removed,{element:e.cloneNode()}),e.textContent=t)),bt("afterSanitizeElements",e,null),!1):(dt(e),!0)},At=function(e,t,n){if(Be&&("id"===t||"name"===t)&&(n in a||n in ot))return!1;if(Le&&!ke[t]&&S(ve,t));else if(Ce&&S(be,t));else if(!Se[t]||ke[t]){if(!(Tt(e)&&(Me.tagNameCheck instanceof RegExp&&S(Me.tagNameCheck,e)||Me.tagNameCheck instanceof Function&&Me.tagNameCheck(e))&&(Me.attributeNameCheck instanceof RegExp&&S(Me.attributeNameCheck,t)||Me.attributeNameCheck instanceof Function&&Me.attributeNameCheck(t))||"is"===t&&Me.allowCustomizedBuiltInElements&&(Me.tagNameCheck instanceof RegExp&&S(Me.tagNameCheck,n)||Me.tagNameCheck instanceof Function&&Me.tagNameCheck(n))))return!1}else if(Qe[t]);else if(S(Te,T(n,Ae,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==E(n,"data:")||!qe[e])if(_e&&!S(we,T(n,Ae,"")));else if(n)return!1;return!0},Tt=function(e){return e.indexOf("-")>0},Et=function(e){var t,n,o,i;bt("beforeSanitizeAttributes",e,null);var a=e.attributes;if(a){var l={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Se};for(i=a.length;i--;){var s=t=a[i],u=s.name,c=s.namespaceURI;if(n="value"===u?t.value:x(t.value),o=ge(u),l.attrName=o,l.attrValue=n,l.keepAttr=!0,l.forceKeepAttr=void 0,bt("uponSanitizeAttribute",e,l),n=l.attrValue,!l.forceKeepAttr&&(mt(u,e),l.keepAttr))if(S(/\/>/i,n))mt(u,e);else{Ie&&(n=T(n,he," "),n=T(n,ye," "));var f=ge(e.nodeName);if(At(f,o,n))try{c?e.setAttributeNS(c,u,n):e.setAttribute(u,n),v(r.removed)}catch(e){}}}bt("afterSanitizeAttributes",e,null)}},xt=function e(t){var n,r=ht(t);for(bt("beforeSanitizeShadowDOM",t,null);n=r.nextNode();)bt("uponSanitizeShadowNode",n,null),wt(n)||(n.content instanceof l&&e(n.content),Et(n));bt("afterSanitizeShadowDOM",t,null)};return r.sanitize=function(t,o){var a,s,c,f,p;if((et=!t)&&(t="\x3c!--\x3e"),"string"!=typeof t&&!vt(t)){if("function"!=typeof t.toString)throw N("toString is not a function");if("string"!=typeof(t=t.toString()))throw N("dirty is not a string, aborting")}if(!r.isSupported){if("object"===e(n.toStaticHTML)||"function"==typeof n.toStaticHTML){if("string"==typeof t)return n.toStaticHTML(t);if(vt(t))return n.toStaticHTML(t.outerHTML)}return t}if(De||at(o),r.removed=[],"string"==typeof t&&(Pe=!1),Pe){if(t.nodeName){var d=ge(t.nodeName);if(!Ee[d]||Oe[d])throw N("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof u)1===(s=(a=gt("\x3c!----\x3e")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===s.nodeName||"HTML"===s.nodeName?a=s:a.appendChild(s);else{if(!ze&&!Ie&&!Re&&-1===t.indexOf("<"))return oe&&Fe?oe.createHTML(t):t;if(!(a=gt(t)))return ze?null:Fe?ie:""}a&&Ue&&dt(a.firstChild);for(var m=ht(Pe?t:a);c=m.nextNode();)3===c.nodeType&&c===f||wt(c)||(c.content instanceof l&&xt(c.content),Et(c),f=c);if(f=null,Pe)return t;if(ze){if(je)for(p=ue.call(a.ownerDocument);a.firstChild;)p.appendChild(a.firstChild);else p=a;return Se.shadowroot&&(p=fe.call(i,p,!0)),p}var g=Re?a.outerHTML:a.innerHTML;return Re&&Ee["!doctype"]&&a.ownerDocument&&a.ownerDocument.doctype&&a.ownerDocument.doctype.name&&S(Y,a.ownerDocument.doctype.name)&&(g="<!DOCTYPE "+a.ownerDocument.doctype.name+">\n"+g),Ie&&(g=T(g,he," "),g=T(g,ye," ")),oe&&Fe?oe.createHTML(g):g},r.setConfig=function(e){at(e),De=!0},r.clearConfig=function(){rt=null,De=!1},r.isValidAttribute=function(e,t,n){rt||at({});var r=ge(e),o=ge(t);return At(r,o,n)},r.addHook=function(e,t){"function"==typeof t&&(de[e]=de[e]||[],b(de[e],t))},r.removeHook=function(e){if(de[e])return v(de[e])},r.removeHooks=function(e){de[e]&&(de[e]=[])},r.removeAllHooks=function(){de={}},r}();return K}();var oe=re.exports,ie={class:"className",for:"htmlFor","http-equiv":"httpEquiv"},ae=function(e){return function(t,n,r){for(var o in n)o in ie&&(n[ie[o]]=n[o],delete n[o]);return e(t,n,r)}},le=10,se=11,ue=12,ce=13;function fe(e){return 9===e||e===le}var pe=RegExp("^("+["area","base","basefont","bgsound","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr","!--","animate","animateTransform","circle","cursor","desc","ellipse","feBlend","feColorMatrix","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","font-face-format","font-face-name","font-face-uri","glyph","glyphRef","hkern","image","line","missing-glyph","mpath","path","polygon","polyline","rect","set","stop","tref","use","view","vkern"].join("|")+")(?:[.#][a-zA-Z0-9-￿_:-]+)*$");function de(e){return pe.test(e)}var me=/\n[\s]+$/,ge=/^\n[\s]+/,he=/[\s]+$/,ye=/^[\s]+/,ve=/[\n\s]+/g,be=["a","abbr","b","bdi","bdo","br","cite","data","dfn","em","i","kbd","mark","q","rp","rt","rtc","ruby","s","amp","small","span","strong","sub","sup","time","u","var","wbr"],we=["code","pre","textarea"],Ae=function e(t,n){if(Array.isArray(n))for(var r,o,i=t.nodeName.toLowerCase(),a=!1,l=0,s=n.length;l<s;l++){var u=n[l];if(Array.isArray(u))e(t,u);else{("number"==typeof u||"boolean"==typeof u||"function"==typeof u||u instanceof Date||u instanceof RegExp)&&(u=u.toString());var c=t.childNodes[t.childNodes.length-1];if("string"==typeof u)a=!0,c&&"#text"===c.nodeName?c.nodeValue+=u:(u=t.ownerDocument.createTextNode(u),t.appendChild(u),c=u),l===s-1&&(a=!1,-1===be.indexOf(i)&&-1===we.indexOf(i)?""===(r=c.nodeValue.replace(ge,"").replace(he,"").replace(me,"").replace(ve," "))?t.removeChild(c):c.nodeValue=r:-1===we.indexOf(i)&&(o=0===l?"":" ",r=c.nodeValue.replace(ge,o).replace(ye," ").replace(he,"").replace(me,"").replace(ve," "),c.nodeValue=r));else if(u&&u.nodeType){a&&(a=!1,-1===be.indexOf(i)&&-1===we.indexOf(i)?""===(r=c.nodeValue.replace(ge,"").replace(me," ").replace(ve," "))?t.removeChild(c):c.nodeValue=r:-1===we.indexOf(i)&&(r=c.nodeValue.replace(ye," ").replace(ge,"").replace(me," ").replace(ve," "),c.nodeValue=r));var f=u.nodeName;f&&(i=f.toLowerCase()),t.appendChild(u)}}}},Te=["svg","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Ee=["async","autofocus","autoplay","checked","controls","default","defaultchecked","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","novalidate","open","playsinline","readonly","required","reversed","selected"],xe=["indeterminate"],Se=function(e){function t(t,n,r){var o;-1!==Te.indexOf(t)&&(n.namespace="http://www.w3.org/2000/svg");var i=!1;n.namespace&&(i=n.namespace,delete n.namespace);var a=!1;if(n.is&&(a=n.is,delete n.is),i)o=a?e.createElementNS(i,t,{is:a}):e.createElementNS(i,t);else{if("!--"===t)return e.createComment(n.comment);o=a?e.createElement(t,{is:a}):e.createElement(t)}for(var l in n)if(n.hasOwnProperty(l)){var s=l.toLowerCase(),u=n[l];if("classname"===s&&(s="class",l="class"),"htmlFor"===l&&(l="for"),-1!==Ee.indexOf(s))if("true"===String(u))u=s;else if("false"===String(u))continue;"on"===s.slice(0,2)||-1!==xe.indexOf(s)?o[l]=u:i?"xlink:href"===l?o.setAttributeNS("http://www.w3.org/1999/xlink",l,u):/^xmlns($|:)/i.test(l)||o.setAttributeNS(null,l,u):o.setAttribute(l,u)}return Ae(o,r),o}var n=function(e,t){t||(t={});var n=t.concat||function(e,t){return String(e)+String(t)};return!1!==t.attrToProp&&(e=ae(e)),function(o){for(var i=1,a="",l=arguments.length,s=[],u=0;u<o.length;u++)if(u<l-1){var c=arguments[u+1],f=T(o[u]),p=i;p===le&&(p=8),9===p&&(p=8),7===p&&(p=8),4===p&&(p=5),2===p?"/"===a?(f.push([2,"/",c]),a=""):f.push([2,c]):p===ce&&t.comments?a+=String(c):p!==ce&&f.push([0,p,c]),s.push.apply(s,f)}else s.push.apply(s,T(o[u]));var d=[null,{},[]],m=[[d,-1]];for(u=0;u<s.length;u++){var g=m[m.length-1][0],h=(f=s[u])[0];if(2===h&&/^\//.test(f[1])){var y=m[m.length-1][1];m.length>1&&(m.pop(),m[m.length-1][0][2][y]=e(g[0],g[1],g[2].length?g[2]:void 0))}else if(2===h){var v=[f[1],{},[]];g[2].push(v),m.push([v,g[2].length-1])}else if(5===h||0===h&&5===f[1]){for(var b,w="";u<s.length;u++)if(5===s[u][0])w=n(w,s[u][1]);else{if(0!==s[u][0]||5!==s[u][1])break;if("object"!=typeof s[u][2]||w)w=n(w,s[u][2]);else for(b in s[u][2])s[u][2].hasOwnProperty(b)&&!g[1][b]&&(g[1][b]=s[u][2][b])}s[u][0]===se&&u++;for(var A=u;u<s.length;u++)if(8===s[u][0]||5===s[u][0])g[1][w]?""===s[u][1]||(g[1][w]=n(g[1][w],s[u][1])):g[1][w]=r(s[u][1]);else{if(0!==s[u][0]||8!==s[u][1]&&5!==s[u][1]){!w.length||g[1][w]||u!==A||3!==s[u][0]&&s[u][0]!==ue||(g[1][w]=w.toLowerCase()),3===s[u][0]&&u--;break}g[1][w]?""===s[u][2]||(g[1][w]=n(g[1][w],s[u][2])):g[1][w]=r(s[u][2])}}else if(5===h)g[1][f[1]]=!0;else if(0===h&&5===f[1])g[1][f[2]]=!0;else if(3===h)de(g[0])&&m.length&&(y=m[m.length-1][1],m.pop(),m[m.length-1][0][2][y]=e(g[0],g[1],g[2].length?g[2]:void 0));else if(0===h&&1===f[1])void 0===f[2]||null===f[2]?f[2]="":f[2]||(f[2]=n("",f[2])),Array.isArray(f[2][0])?g[2].push.apply(g[2],f[2]):g[2].push(f[2]);else if(1===h)g[2].push(f[1]);else if(h!==se&&h!==ue)throw new Error("unhandled: "+h)}if(d[2].length>1&&/^\s*$/.test(d[2][0])&&d[2].shift(),d[2].length>2||2===d[2].length&&/\S/.test(d[2][1])){if(t.createFragment)return t.createFragment(d[2]);throw new Error("multiple root elements must be wrapped in an enclosing tag")}return Array.isArray(d[2][0])&&"string"==typeof d[2][0][0]&&Array.isArray(d[2][0][2])&&(d[2][0]=e(d[2][0][0],d[2][0][1],d[2][0][2])),d[2][0];function T(e){var n=[];7===i&&(i=4);for(var r=0;r<e.length;r++){var o=e.charAt(r);1===i&&"<"===o?(a.length&&n.push([1,a]),a="",i=2):">"!==o||fe(i)||i===ce?i===ce&&/-$/.test(a)&&"-"===o?(t.comments&&n.push([8,a.substr(0,a.length-1)]),a="",i=1):2===i&&/^!--$/.test(a)?(t.comments&&n.push([2,a],[5,"comment"],[se]),a=o,i=ce):1===i||i===ce?a+=o:2===i&&"/"===o&&a.length||(2===i&&/\s/.test(o)?(a.length&&n.push([2,a]),a="",i=4):2===i?a+=o:4===i&&/[^\s"'=/]/.test(o)?(i=5,a=o):4===i&&/\s/.test(o)?(a.length&&n.push([5,a]),n.push([ue])):5===i&&/\s/.test(o)?(n.push([5,a]),a="",i=6):5===i&&"="===o?(n.push([5,a],[se]),a="",i=7):5===i?a+=o:6!==i&&4!==i||"="!==o?6!==i&&4!==i||/\s/.test(o)?7===i&&'"'===o?i=le:7===i&&"'"===o?i=9:i===le&&'"'===o||9===i&&"'"===o?(n.push([8,a],[ue]),a="",i=4):7!==i||/\s/.test(o)?8===i&&/\s/.test(o)?(n.push([8,a],[ue]),a="",i=4):8!==i&&9!==i&&i!==le||(a+=o):(i=8,r--):(n.push([ue]),/[\w-]/.test(o)?(a+=o,i=5):i=4):(n.push([se]),i=7)):(2===i&&a.length?n.push([2,a]):5===i?n.push([5,a]):8===i&&a.length&&n.push([8,a]),n.push([3]),a="",i=1)}return 1===i&&a.length?(n.push([1,a]),a=""):8===i&&a.length||i===le&&a.length||9===i&&a.length?(n.push([8,a]),a=""):5===i&&(n.push([5,a]),a=""),n}};function r(e){return"function"==typeof e||"string"==typeof e||e&&"object"==typeof e||null==e?e:n("",e)}}(t,{comments:!0,createFragment:function t(n){for(var r=e.createDocumentFragment(),o=0;o<n.length;o++)null!=n[o]&&(Array.isArray(n[o])?r.appendChild(t(n[o])):("string"==typeof n[o]&&(n[o]=e.createTextNode(n[o])),r.appendChild(n[o])));return r}});return n.default=n,n.createComment=t,n}(document);function Ne(e,t){if(!e)throw new Error(t||"AssertionError")}Ne.notEqual=function(e,t,n){Ne(e!=t,n)},Ne.notOk=function(e,t){Ne(!e,t)},Ne.equal=function(e,t,n){Ne(e==t,n)},Ne.ok=Ne;var Me=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","onanimationend","onanimationiteration","onanimationstart","oncontextmenu","onfocusin","onfocusout"],Oe=Me.length;function ke(e,t,n){e[n]!==t[n]&&(t[n]=e[n],e[n]?t.setAttribute(n,""):t.removeAttribute(n))}var Ce=Ne;function Le(e,t){return t?e?e.isSameNode&&e.isSameNode(t)?t:e.tagName!==t.tagName||_e(e)!==_e(t)?e:(function(e,t){var n=e.nodeType,r=e.nodeName;1===n&&function(e,t){for(var n=t.attributes,r=e.attributes,o=null,i=null,a=null,l=null,s=r.length-1;s>=0;--s)a=(l=r[s]).name,o=l.namespaceURI,i=l.value,o?(a=l.localName||a,t.getAttributeNS(o,a)!==i&&t.setAttributeNS(o,a,i)):t.hasAttribute(a)?t.getAttribute(a)!==i&&("null"===i||"undefined"===i?t.removeAttribute(a):t.setAttribute(a,i)):t.setAttribute(a,i);for(var u=n.length-1;u>=0;--u)!1!==(l=n[u]).specified&&(a=l.name,(o=l.namespaceURI)?(a=l.localName||a,e.hasAttributeNS(o,a)||t.removeAttributeNS(o,a)):e.hasAttributeNS(null,a)||t.removeAttribute(a))}(e,t),3!==n&&8!==n||t.nodeValue!==e.nodeValue&&(t.nodeValue=e.nodeValue),"INPUT"===r?function(e,t){var n=e.value,r=t.value;ke(e,t,"checked"),ke(e,t,"disabled"),e.indeterminate!==t.indeterminate&&(t.indeterminate=e.indeterminate),"file"!==t.type&&(n!==r&&(t.setAttribute("value",n),t.value=n),"null"===n&&(t.value="",t.removeAttribute("value")),e.hasAttributeNS(null,"value")?"range"===t.type&&(t.value=n):t.removeAttribute("value"))}(e,t):"OPTION"===r?function(e,t){ke(e,t,"selected")}(e,t):"TEXTAREA"===r&&function(e,t){var n=e.value;if(n!==t.value&&(t.value=n),t.firstChild&&t.firstChild.nodeValue!==n){if(""===n&&t.firstChild.nodeValue===t.placeholder)return;t.firstChild.nodeValue=n}}(e,t),function(e,t){for(var n=0;n<Oe;n++){var r=Me[n];e[r]?t[r]=e[r]:t[r]&&(t[r]=void 0)}}(e,t)}(e,t),Ie(e,t),t):null:e}function _e(e){return e.dataset?e.dataset.nanomorphComponentId:void 0}function Ie(e,t){for(var n,r,o,i,a=0,l=0;n=t.childNodes[l],r=e.childNodes[l-a],n||r;l++)if(r)if(n)if(Re(r,n))(o=Le(r,n))!==n&&(t.replaceChild(o,n),a++);else{i=null;for(var s=l;s<t.childNodes.length;s++)if(Re(t.childNodes[s],r)){i=t.childNodes[s];break}i?((o=Le(r,i))!==i&&a++,t.insertBefore(o,n)):r.id||n.id?(t.insertBefore(r,n),a++):(o=Le(r,n))!==n&&(t.replaceChild(o,n),a++)}else t.appendChild(r),a++;else t.removeChild(n),l--}function Re(e,t){return e.id?e.id===t.id:e.isSameNode?e.isSameNode(t):e.tagName===t.tagName&&3===e.type&&e.nodeValue===t.nodeValue}function De(e,t){let n=function(e){let t=Se`${function(e){var t,n=document.createElement("div");return n.innerHTML=e,t=n.childNodes,Array.isArray(t)?t:[].slice.call(t)}(e)}<br/>`,n=t.childElementCount;if(2===n)return t.firstElementChild;let r=document.createElement("div");return n>2&&(t.removeChild(t.lastElementChild),r.appendChild(t)),r}(t),r=function(e){let t=e.childElementCount;if(1===t)return e.firstElementChild;let n=document.createElement("DIV");if(0===t)return e.appendChild(n),n;for(;e.firstChild;)n.appendChild(e.removeChild(e.firstChild));return e.appendChild(n),n}(e);!function(e,t,n){Ce.equal(typeof e,"object","nanomorph: oldTree should be an object"),Ce.equal(typeof t,"object","nanomorph: newTree should be an object"),n&&n.childrenOnly?Ie(t,e):(Ce.notEqual(t.nodeType,11,"nanomorph: newTree should have one root node (which is not a DocumentFragment)"),Le(t,e))}(r,n)}function Ue(){let e={organismType:null,organism:null,organismWidth:null,organismHeight:null,resizeListener:null,init:function(t,r,o,i){let a=t.type;w(a,n),Ue.initialized||(e.resizeListener=function(){u.organismIdMap.forEach((function(e){if("dom"===u.organismTypeMap.get(e.type).config.adapter){let t=e.element;T(r.id,a,n,{window:{width:window.innerWidth,height:window.innerHeight},organism:{width:t.offsetWidth,height:t.offsetHeight}})}}))},window.addEventListener(n,e.resizeListener),Ue.initialized=!0),e.organismType=t,e.organism=r,e.render(i)},patch:function(t,n){n&&e.render(n)},scanComplete:function(){let t=e.organism.id,n=e.organism.type;e.organism.element.querySelectorAll("[data-organism-events]").forEach((function(r){let o=r.domEventTypes;o||(o=r.domEventTypes=[]),c(r.dataset.organismEvents).forEach((function(i){let a=i.sourceEventType;o.includes(a)||(r.addEventListener(a,(function(o){o.preventDefault();let l=i.mapping,s={source:{id:null,type:null,group:null},target:{id:t,type:n,group:e.organism.group},config:e.organismType.config,params:e.organism.params,state:e.organism.state,eventType:{organismType:"HTMLElement/"+r.nodeName,eventName:a},event:o},u=b.map(s,l),c=E(n,i.targetEventType);T(t,c.organismType,c.eventType,u)})),o.push(a))}))}))},destroy:function(){window.removeEventListener(n,e.resizeListener),Ue.initialized=!1},render:function(t){let r=t;s.sanitize&&(r=oe.sanitize(r));let o=e.organism.element;De(o,r);let i=o.offsetWidth,a=o.offsetHeight;e.organismWidth===i&&e.organismHeight===a||(T(e.organism.id,e.organismType.type,n,{window:{width:window.innerWidth,height:window.innerHeight},organism:{width:i,height:a}}),e.organismWidth=i,e.organismHeight=a),ne(o)}};return e}function ze(){let e={organism:null,init:function(t,n,r,o){e.organism=n,e.updateModel(r)},updateModel:function(t){if(!t)return;let n=e.organism.element;f(n,t);let r=t.scrollIntoView;r&&n.scrollIntoView(r),ne(e.organism.element)},scanComplete:function(){},destroy:function(){}};return e}function je(){let e={organism:null,init:function(t,n,r,o){e.organism=n,e.updateModel(r)},updateModel:function(t){if(!t)return;f(e.organism.element,t);let n=t.locationHREF;n&&(window.location.href=n);let r=t.locationReload;r&&window.location.reload(r);let o=t.windowOpen;o&&window.open(o.url,o.name,o.specs,o.replace),ne(e.organism.element)},scanComplete:function(){},destroy:function(){}};return e}var Fe={config:{maxWebWorkerSize:25,maxDetachedOrganisms:25,detachedOrganismMonitorInterval:6e4,sanitize:!0,syncAttributes:!1,env:new Map},initialize:function e(t){return new Promise(((n,r)=>{try{!function(){let e,t=document.querySelectorAll("link["+i+"]"),n=0;do{e=t.item(n++),e&&(e.disabled=!0,e.remove())}while(e)}(),function(){let e=u.webWorkerMap;e&&Array.from(e.values()).forEach((function(e){e.webWorker.terminate()}))}(),function(){let e=u.organismIdMap;e&&Array.from(e.values()).forEach((function(e){let t=e.adapter;t&&t.destroy()}))}(),function(e,t){s.maxWebWorkerSize=e&&e.hasOwnProperty("maxWebWorkerSize")?e.maxWebWorkerSize:25,s.maxDetachedOrganisms=e&&e.hasOwnProperty("maxDetachedOrganisms")?e.maxDetachedOrganisms:25,s.sanitize=!e||!e.hasOwnProperty("sanitize")||e.sanitize,s.syncAttributes=!(!e||!e.hasOwnProperty("syncAttributes"))&&e.syncAttributes,s.detachedOrganismMonitorInterval=e&&e.hasOwnProperty("detachedOrganismMonitorInterval")?e.detachedOrganismMonitorInterval:6e4,s.env=e&&e.hasOwnProperty("env")?e.env:new Map,s.adapters=new Map,s.adapters.set("dom",Ue),s.adapters.set("organismAttributes",ze),s.adapters.set("bodyAttributes",je),s.initialize=t,s.emitEvent=function(e,t,n){let r=u.eventListenersMap;t&&r.has(t)?(r.get(t).forEach((t=>{t(e,n,t.stateful)})),r.get("*").forEach((r=>{r(e,{type:t,data:n},r.stateful)}))):console.error(l+t)},s.addEventListener=function(e,t,n){let r={organismType:null,eventType:null};e&&(r=E(null,e)),r&&A(r.organismType,r.eventType,t,n)}}(t,e),u.initializeing=0,u.postInitializeQueue=[],u.organismIdMap=new Map,u.organismTypeMap=new Map,u.organismGroupMap=new Map,u.webWorkerMap=new Map,u.eventListenersMap=new Map,u.detachedOrganismIds=[],u.eventListenersMap.set("*",[]),ne(document.body,(function(){n(s)})),setInterval((function(){u.organismIdMap.forEach((function(e){document.body.contains(e.element)||g(e,!1)})),h()}),s.detachedOrganismMonitorInterval)}catch(e){r(e)}}))}};return Fe}();
